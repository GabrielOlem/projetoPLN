version: "2.0"
stories:
- story: greeting
  steps:
  - intent: greet
  - action: utter_greet
  - checkpoint: check_greet

- story: teste
  steps:
  - or:
    - intent: flight
    - intent: airfare
  - action: flight_form
  - active_loop: flight_form
  - action: utter_iamabot
- story: fromLocGiven # Usuario passa cidade destino, bot confirma e pede cidade fonte
  steps:
  - checkpoint: check_greet
  - or:
    - intent: flight
      entities:
        - fromloc.city_name
    - intent: airfare
      entities:
        - fromloc.city_name
  - action: utter_confirm_from
  - checkpoint: check_source

- story: affirmativePlace
  steps:
  - checkpoint: check_source
  - intent: affirm
  - action: utter_ask_dest
  - or:
    - intent: flight
      entities:
        - toloc.city_name
    - intent: airfare
      entities:
        - toloc.city_name
  - action: action_api_test
  - checkpoint: check_flow_finished

- story: traveling_deny # Usuario passa cidade destino, bot confirma, pessoa nega, bot pede novamente e pede cidade destino
  steps:
  - checkpoint: check_source
  - intent: deny
  - action: utter_reask
  - or:
    - intent: flight
      entities:
        - fromloc.city_name
    - intent: airfare
      entities:
        - fromloc.city_name
  - action: utter_ask_dest
  - or:
    - intent: flight
      entities:
        - toloc.city_name
    - intent: airfare
      entities:
        - toloc.city_name
  - action: action_api_test
  - checkpoint: check_flow_finished

- story: finish flow
  steps:
    - checkpoint: check_flow_finished
    - intent: goodbye
    - action: utter_goodbye

- story: traveling_api
  steps:
    - intent: greet
    - action: utter_greet
    - or:
    - intent: flight
      entities:
        - fromloc.city_name
        - toloc.city_name
    - intent: airfare
      entities:
        - fromloc.city_name
        - toloc.city_name
    - action: action_api_test